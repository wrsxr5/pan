import{a as m}from"./chunk-C6P4MNK7.js";import{F as S,s as p}from"./chunk-VO7SG4EQ.js";import{$ as n,T as s,W as r,i as a,t as f}from"./chunk-ETUXU3TJ.js";var h=(()=>{class i{directory="";selected=[];enabled=!1;toggleSelectionSubject=new a;toggleSelectionEvent=this.toggleSelectionSubject.asObservable();toggleSelection(e){this.selected=[],this.enabled=e,this.toggleSelectionSubject.next(e)}onToggleSelection(){return this.toggleSelectionEvent}static \u0275fac=function(t){return new(t||i)};static \u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var u="ACTION_CHANGED",F=(()=>{class i{http;configService;eventService;selectionService;CONFIG_KEY="ACTION";defaultAction="";constructor(e,t,o,c){this.http=e,this.configService=t,this.eventService=o,this.selectionService=c}getActions(){return this.configService.getConfig(this.CONFIG_KEY).pipe(f(e=>(e?.actions||[]).sort((t,o)=>t.name.localeCompare(o.name))),s(e=>this.defaultAction=e.find(t=>t.isDefault)?.name||""))}setActions(e){return this.configService.setConfig({key:this.CONFIG_KEY,config:{actions:e}}).pipe(s(()=>this.eventService.emit(u)))}run(e=this.defaultAction){e.length!==0&&this.handleActionRequest({name:e,directory:this.selectionService.directory,selectedEntries:this.selectionService.selected}).subscribe(t=>{if(t&&t.id){let{protocol:o,hostname:c,port:l}=window.location,d=`${o}//${c}${l?`:${l}`:""}`;window.location.href=`panclient://${e}/${t.id}/${encodeURIComponent(d)}`}})}handleActionRequest(e){return this.http.post("/api/action",e)}static \u0275fac=function(t){return new(t||i)(n(p),n(S),n(m),n(h))};static \u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{h as a,u as b,F as c};
