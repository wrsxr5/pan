import{c as N}from"./chunk-EKVMEYYK.js";import{a as Y,b as ee,c as te}from"./chunk-NTPKRG57.js";import{b as Q}from"./chunk-RFR63KKH.js";import"./chunk-3QIFBVMG.js";import{a as U,d as X}from"./chunk-C6P4MNK7.js";import{c as W,d as O,e as K,f as $,i as Z}from"./chunk-LEP5KRIK.js";import{a as R,c as G,f as z,l as M}from"./chunk-XYKVWS4A.js";import{A as B,B as q,C as J,z as V}from"./chunk-VO7SG4EQ.js";import{B as P,Cb as d,Eb as h,Gb as A,Hb as D,Ib as j,Ka as l,Pa as u,T as I,Va as w,_a as S,fb as L,hb as k,ia as v,ib as T,ja as C,jb as y,ka as b,kb as E,la as x,lb as F,mb as o,nb as r,ob as s,pb as _,sb as m,tb as c,xa as f}from"./chunk-ETUXU3TJ.js";function re(t,a){if(t&1){let e=_();o(0,"li")(1,"button",4),m("click",function(){let n=v(e).$implicit,p=c(2);return C(p.run(n))}),d(2),o(3,"div",5),d(4),r()()()}if(t&2){let e=a.$implicit;l(2),h(" ",e.name," "),l(),k("badge-primary",e.type==="CLIENT")("badge-secondary",e.type==="SERVER"),l(),h(" ",e.type," ")}}function le(t,a){if(t&1&&(o(0,"button",0),b(),o(1,"svg",1),s(2,"path",2),r()(),x(),o(3,"ul",3),E(4,re,5,6,"li",null,y),r()),t&2){let e=c();l(4),F(e.actions())}}var ie=(()=>{class t{actionService;eventService;actions=f([]);subscriptions=[];ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}constructor(e,i){this.actionService=e,this.eventService=i,this.refreshActions(),this.subscriptions.push(this.eventService.on(ee).subscribe(()=>this.refreshActions()))}refreshActions(){this.actionService.getActions().subscribe(e=>this.actions.set(e))}run(e){this.actionService.run(e.name)}static \u0275fac=function(i){return new(i||t)(u(te),u(U))};static \u0275cmp=w({type:t,selectors:[["app-action"]],decls:1,vars:1,consts:[["popovertarget","toolbar-action",1,"btn","btn-ghost","btn-circle","mr-2",2,"anchor-name","--toolbar-action"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"],["popover","","id","toolbar-action",1,"dropdown","dropdown-end","menu","p-2","shadow","bg-base-200","rounded-box",2,"position-anchor","--toolbar-action"],[3,"click"],[1,"badge","badge-sm","ml-1"]],template:function(i,n){i&1&&S(0,le,6,0),i&2&&T(n.actions().length>0?0:-1)},encapsulation:2,changeDetection:0})}return t})();function ce(t,a){if(t&1){let e=_();o(0,"li")(1,"button",0),m("click",function(){let n=v(e).$implicit,p=c();return C(p.setSort(n.name))}),d(2),r()()}if(t&2){let e=a.$implicit,i=c();l(),k("menu-active",i.currentSort()===e.name),l(),h(" ",e.label," ")}}function pe(t,a){if(t&1){let e=_();o(0,"li")(1,"button",0),m("click",function(){v(e);let n=c();return C(n.resetFilter())}),b(),o(2,"svg",13),s(3,"path",4),r(),d(4),r()()}if(t&2){let e=c();l(4),h(" ",e.currentFilter()," ")}}var ne=(()=>{class t{explorerService;selectionService;sorts=B.FILE;filterModel="";config=J();currentFilter=f("");currentSort=f("NAME");selection=f(!1);applyConfig(){this.currentFilter.set(this.config.filter),this.currentSort.set(this.config.sort)}constructor(e,i){this.explorerService=e,this.selectionService=i,this.explorerService.fileTabConfig.subscribe(n=>{this.config=n,this.applyConfig()}),this.selection.set(this.selectionService.enabled)}saveConfig(){this.explorerService.setFileTabConfig(this.config).pipe(I(()=>this.applyConfig())).subscribe()}resetFilter(){this.filterModel="",this.setFilter()}setFilter(){this.config.filter=this.filterModel,this.filterModel="",this.saveConfig()}setSort(e){this.config.sort=e,this.saveConfig()}onKeypress(e){e.key==="Enter"&&(e.target.blur(),this.setFilter())}setSelection(){this.selection.update(e=>!e),this.selectionService.toggleSelection(this.selection())}static \u0275fac=function(i){return new(i||t)(u(N),u(Y))};static \u0275cmp=w({type:t,selectors:[["app-file-tab-config"]],decls:19,vars:3,consts:[[3,"click"],[1,"toggle","toggle-sm"],["name","toggle-selection-checkbox","type","checkbox",3,"click","checked"],["aria-label","disabled","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","3","stroke","currentColor",1,"size-4"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18 18 6M6 6l12 12"],["aria-label","enabled","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","3","stroke","currentColor",1,"size-4"],["stroke-linecap","round","stroke-linejoin","round","d","m4.5 12.75 6 6 9-13.5"],[1,"m-2"],[1,"input","input-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"],["id","file-tab-filter","type","text","placeholder","Filter",3,"ngModelChange","keypress","ngModel"],[1,"kbd","kbd-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","5","stroke","currentColor",1,"size-3","pt-0.5"]],template:function(i,n){i&1&&(E(0,ce,3,3,"li",null,y),o(2,"li")(3,"button",0),m("click",function(){return n.setSelection()}),d(4," Selection "),o(5,"label",1)(6,"input",2),m("click",function(){return n.setSelection()}),r(),b(),o(7,"svg",3),s(8,"path",4),r(),o(9,"svg",5),s(10,"path",6),r()()()(),S(11,pe,5,1,"li"),x(),o(12,"li",7)(13,"label",8),b(),o(14,"svg",9),s(15,"path",10),r(),x(),o(16,"input",11),j("ngModelChange",function(g){return D(n.filterModel,g)||(n.filterModel=g),g}),m("keypress",function(g){return n.onKeypress(g)}),r(),o(17,"kbd",12),d(18,"\u21A9"),r()()()),i&2&&(F(n.sorts),l(6),L("checked",n.selection()),l(5),T(n.currentFilter().length>0?11:-1),l(5),A("ngModel",n.filterModel))},dependencies:[M,R,G,z],encapsulation:2,changeDetection:0})}return t})();function me(t,a){if(t&1){let e=_();o(0,"li")(1,"button",6),m("click",function(){let n=v(e).$implicit,p=c();return C(p.setSort(n.name))}),d(2),r()()}if(t&2){let e=a.$implicit,i=c();l(),k("menu-active",i.currentSort()===e.name),l(),h(" ",e.label," ")}}function de(t,a){if(t&1){let e=_();o(0,"li")(1,"button",6),m("click",function(){v(e);let n=c();return C(n.resetFilter())}),b(),o(2,"svg",7),s(3,"path",8),r(),d(4),r()()}if(t&2){let e=c();l(4),h(" ",e.currentFilter()," ")}}var oe=(()=>{class t{explorerService;sorts=B.TITLE;filterModel="";config=q();currentFilter=f("");currentSort=f("NAME");applyConfig(){this.currentFilter.set(this.config.filter),this.currentSort.set(this.config.sort)}constructor(e){this.explorerService=e,this.explorerService.titleTabConfig.subscribe(i=>{this.config=i,this.applyConfig()})}saveConfig(){this.explorerService.setTitleTabConfig(this.config).pipe(I(()=>this.applyConfig())).subscribe()}resetFilter(){this.filterModel="",this.setFilter()}setFilter(){this.config.filter=this.filterModel,this.filterModel="",this.saveConfig()}setSort(e){this.config.sort=e,this.saveConfig()}onKeypress(e){e.key==="Enter"&&(e.target.blur(),this.setFilter())}static \u0275fac=function(i){return new(i||t)(u(N))};static \u0275cmp=w({type:t,selectors:[["app-title-tab-config"]],decls:10,vars:2,consts:[[1,"m-2"],[1,"input","input-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"],["id","title-tab-filter","type","text","placeholder","Filter",3,"ngModelChange","keypress","ngModel"],[1,"kbd","kbd-sm"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","5","stroke","currentColor",1,"size-3","pt-0.5"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18 18 6M6 6l12 12"]],template:function(i,n){i&1&&(E(0,me,3,3,"li",null,y),S(2,de,5,1,"li"),o(3,"li",0)(4,"label",1),b(),o(5,"svg",2),s(6,"path",3),r(),x(),o(7,"input",4),j("ngModelChange",function(g){return D(n.filterModel,g)||(n.filterModel=g),g}),m("keypress",function(g){return n.onKeypress(g)}),r(),o(8,"kbd",5),d(9,"\u21A9"),r()()()),i&2&&(F(n.sorts),l(2),T(n.currentFilter().length>0?2:-1),l(5),A("ngModel",n.filterModel))},dependencies:[M,R,G,z],encapsulation:2,changeDetection:0})}return t})();function fe(t,a){if(t&1){let e=_();o(0,"button",10),m("click",function(){let n=v(e).$implicit,p=c();return C(p.goToTab(n))}),d(1),r()}if(t&2){let e=a.$implicit,i=c();k("tab-active",i.tab()===e),l(),h(" ",i.allTabs[e].label," ")}}function ue(t,a){t&1&&s(0,"app-action"),t&2&&L("@enterLeaveAnimation",void 0)}function ge(t,a){t&1&&s(0,"app-title-tab-config")}function be(t,a){t&1&&s(0,"app-file-tab-config")}function he(t){if(!t)return;let a=Object.entries(V).find(([,e])=>e.route===t);return a?a[0]:void 0}var dt=(()=>{class t{router;route;libraryService;library=f(null);allTabs=V;tabs=f(["TITLE","FILE"]);tab=f("TITLE");subscriptions=[];ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}setLibrary(e){if(!e)return;let i=this.route.firstChild?.snapshot?.url[0]?.path,n=he(i);if(n){if(this.library.set(e.library),this.tab.set(n),(e.info?.matched||0)>0){this.tabs.set(["TITLE","FILE"]);return}this.tabs.set(["FILE"]),n!=="FILE"&&this.router.navigate([V.FILE.route],{relativeTo:this.route})}}onNavigationEnd(){let e=Number(this.route.snapshot.paramMap.get("index"));this.libraryService.getDetail(e).subscribe(i=>this.setLibrary(i))}constructor(e,i,n){this.router=e,this.route=i,this.libraryService=n,this.onNavigationEnd(),this.subscriptions.push(this.router.events.pipe(P(p=>p instanceof W)).subscribe(()=>this.onNavigationEnd()))}goToTab(e){this.router.navigate([V[e].route],{relativeTo:this.route})}static \u0275fac=function(i){return new(i||t)(u($),u(O),u(X))};static \u0275cmp=w({type:t,selectors:[["app-explorer"]],decls:15,vars:2,consts:[[1,"flex","flex-col","h-full","w-full","pr-4"],[1,"flex","justify-between","items-center","bg-base-200","rounded-box"],[1,"tabs","tabs-border"],[1,"tab",3,"tab-active"],[1,"flex"],["popovertarget","toolbar-config",1,"btn","btn-ghost","btn-circle","mr-2",2,"anchor-name","--toolbar-config"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"],["popover","","id","toolbar-config",1,"dropdown","dropdown-end","menu","p-2","shadow","bg-base-200","rounded-box","w-61",2,"position-anchor","--toolbar-config"],[1,"grow","min-h-0","w-full"],[1,"tab",3,"click"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),E(3,fe,2,3,"button",3,y),r(),o(5,"div",4),S(6,ue,1,1,"app-action"),o(7,"button",5),b(),o(8,"svg",6),s(9,"path",7),r()(),x(),o(10,"ul",8),S(11,ge,1,0,"app-title-tab-config")(12,be,1,0,"app-file-tab-config"),r()()(),o(13,"div",9),s(14,"router-outlet"),r()()),i&2&&(l(3),F(n.tabs()),l(3),T(n.tab()==="FILE"?6:-1),l(5),T(n.tab()==="TITLE"?11:n.tab()==="FILE"?12:-1))},dependencies:[M,Z,K,ie,oe,ne],encapsulation:2,data:{animation:[Q]},changeDetection:0})}return t})();export{dt as ExplorerComponent};
